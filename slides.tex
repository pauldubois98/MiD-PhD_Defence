\documentclass{beamer}

\title{Mid-PhD Defense}
\author{Paul Dubois}
\institute{
	TheraPanacea\\
	MICS, CentraleSupÃ©lec\\
	Institut du Cancer de Montpellier
}
\date{21st June 2023}

\usepackage{tikz}
\usepackage{multicol}

\begin{document}
	
	\frame{\titlepage}
	
	\begin{frame}
		\frametitle{Outline}
		\begin{multicols}{2}
			\tableofcontents
		\end{multicols}
	\end{frame}

	\section{Introduction}
	\subsection{Cancer treatments}
	\begin{frame}
		\makebox[\linewidth]{\includegraphics[width=\paperwidth]{imported_slides/cancer_treatments.pdf}}
	\end{frame}
	
	\subsection{Radiotherapy}
	\subsection{Multi-Leaf Collimator}
	\subsection{IMRT/VMAT scheme}
	\subsubsection{Step-and-shot}
	\subsubsection{Sliding-windows}
	\subsection{VMAT scheme}
	\subsection{Radiotherapy workflow}
	
	\section{Problem Statement}
	\subsection{Optimization workflow}
		\begin{frame}
		\frametitle{Automatic Dose Optimization for Radiotherapy}
		\begin{tikzpicture}[node distance=4cm]
			\node (inputs) [draw,double,rounded corners] {\begin{tabular}{l} \textbf{Data} \\ Scan \\ Contours \end{tabular}};
			\node (process) [right of=inputs,draw,rounded corners] {Optimization};
			\node (outputs) [right of=process,draw,double,rounded corners] {Treatment plan};
			\draw [thick,->] (inputs) -- (process);
			\draw [thick,->] (process) -- (outputs);
			\node (human) [below of=process,draw,rounded corners] {Constraints' weights adjusting};
			\draw [double,<-] (process) -- (human);
		\end{tikzpicture}
	\end{frame}
	
	\subsection{Fluence discretization}
	% fluence to bixels
	
	\subsection{FMO problem}
	\subsubsection{Formulation}
		\begin{frame}
		\frametitle{Problem Formulation}
		\framesubtitle{IMRT}
		Bixel values:
		$$x_{i,j}^\theta \geq 0 \text{, for } \theta \in \Theta \text{ and } 1\leq i,j \leq 20\footnote{20x20 is a typical bixel discretization}$$
		usually concatenated to a single bixels-value vector $x$.
		\vspace{0.5cm}
		
		Dose calculation:
		$$\textbf{y} = L\textbf{x} \text{ with } L \text{ (pre-calculated) dose-influence (DI) matrix}$$
	\end{frame}
	\begin{frame}
		\frametitle{Problem Formulation}
		\framesubtitle{IMRT (bis)}
		Objective for \textit{maximum} constraint $c$ on structure $s$, dose $d$:
		$$f_c(\textbf{y}) = \frac{1}{|\mathcal{V}|} \sum_{v \in \mathcal{V}} (\textbf{y}_v-d)_+^2$$
		(reverse sign for minimal constraint).
		\vspace{0.5cm}
		
		Final objective:
		$$f(\textbf{y}) = \sum_{c \in \mathcal{C}} w_c f_c(\textbf{y})$$
		with $w_c$ the weight of constraint $c$.
	\end{frame}
	
	\subsubsection{Optimization}
	% DI matrix generation
	
	\section{Early results}
	\subsection{Optimizers Review}
	\begin{frame}
		\frametitle{Problem Optimization}
		\framesubtitle{Optimizer review}
		\begin{figure}
			\includegraphics[width=10.75cm]{figures/ICMProstate-iter.pdf}
			\caption{Typical prostate case.}
		\end{figure}
		\url{https://arxiv.org/abs/2305.18014}
	\end{frame}
	\begin{frame}
		\frametitle{Problem Optimization}
		\framesubtitle{Optimizer review (bis)}
		\begin{figure}
			\includegraphics[width=10.75cm]{figures/ICMProstate-time.pdf}
			\caption{Typical prostate case.}
		\end{figure}
		\url{https://arxiv.org/abs/2305.18014}
	\end{frame}
	
	\subsection{Meta-Optimization}
	\begin{frame}
		\frametitle{Meta-Optimization}
		\textbf{Usual optimization}
		$$\min_{\textbf{x}} f(\textbf{x}, w) \text{ s.t. } \textbf{x} > 0$$
		... and fine-tune $w$ until the dose is clinically acceptable.
		\vspace{0.5cm}
		
		\textbf{Meta optimization}
		$$\min_w \left\lbrace \min_{\textbf{x}} f(\textbf{x}, w) \text{ s.t. } \textbf{x} > 0 \right\rbrace $$
		... still need to fine-tune the parameters (learning rate, momentum, etc...) of the meta-optimizer.
	\end{frame}
	
	\subsection{Dose Distances}
	\begin{frame}
		\frametitle{Dose Distances}
		\begin{figure}
			\vspace{-0.5cm}
			\includegraphics[width=5cm]{figures/example\_bixels.pdf}
			\includegraphics[width=5cm]{figures/example\_3d\_doses.pdf}
			\vspace{-0.3cm}
			\includegraphics[width=6cm]{figures/example_dvh.pdf}
			\caption{Example of two doses that have the same clinical effect (measured from the DVHs), but very different voxel-wise dose values.}
		\end{figure}
	\end{frame}
	% dose clustering => finished writing!
	% pareto appendix?
	
	\section{Future work}
	% RL setup => normalization of constr; reward func
	
	\section{Others}
	\subsection{Courses}
	\subsection{Doctoral training}
	\section{References}
	\begin{frame}
		\frametitle{References}
		
	\end{frame}
	

	

	
	
	
	
	
	
	
	
\end{document}